# ============================================
# WorkBot 环境变量配置
# ============================================
# 请复制此文件为 .env 并填写真实配置
# 生产环境请务必修改所有密钥和密码

# ============================================
# 服务器配置
# ============================================
# 运行环境: development | production | test
NODE_ENV=development

# 服务端口
PORT=5000

# ============================================
# 数据库配置
# ============================================
# 数据库连接字符串（完整格式）
# 格式: postgresql://用户名:密码@主机:端口/数据库名
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/workbot

# 或者分别配置（如果使用的是拼接方式）
DB_HOST=localhost
DB_PORT=5432
DB_NAME=workbot
DB_USER=postgres
DB_PASSWORD=postgres

# ============================================
# JWT 认证配置
# ============================================
# JWT 密钥（必须至少 32 个字符，生产环境务必使用强随机字符串）
JWT_SECRET=your-secret-key-change-in-production-use-at-least-32-characters

# Access Token 过期时间（格式: 数字+单位，如: 24h, 7d, 30m）
JWT_ACCESS_EXPIRES_IN=24h

# Refresh Token 过期时间
JWT_REFRESH_EXPIRES_IN=7d

# ============================================
# WebSocket 配置
# ============================================
# 心跳间隔（毫秒）- 默认 30 秒
WS_HEARTBEAT_INTERVAL=30000

# 最大连接数
WS_MAX_CONNECTIONS=1000

# ============================================
# API 限流配置
# ============================================
# 是否启用限流: true | false
RATE_LIMIT_ENABLED=true

# 限流时间窗口（毫秒）- 默认 1 分钟
RATE_LIMIT_WINDOW_MS=60000

# 每个窗口最大请求数
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# 告警配置（可选）
# ============================================
# 是否启用告警: true | false
ALERT_ENABLED=false

# Webhook URL（用于发送告警通知）
ALERT_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# 告警邮件（多个邮箱用逗号分隔）
ALERT_EMAIL=admin@example.com,ops@example.com

# ============================================
# CORS 配置
# ============================================
# 允许的跨域来源（* 表示允许所有，生产环境建议指定具体域名）
CORS_ORIGIN=*

# ============================================
# 短信服务配置（阿里云）
# ============================================
SMS_ACCESS_KEY_ID=
SMS_ACCESS_KEY_SECRET=
SMS_SIGN_NAME=
SMS_TEMPLATE_CODE=

# ============================================
# 微信支付配置（可选）
# ============================================
WECHAT_APP_ID=
WECHAT_MCH_ID=
WECHAT_API_KEY=
WECHAT_API_SECRET=

# ============================================
# AI 服务配置（可选）
# ============================================
DOUBAO_API_KEY=
DEEPSEEK_API_KEY=
KIMI_API_KEY=

# ============================================
# 开发说明
# ============================================
#
# 1. 生产环境安全要求：
#    - JWT_SECRET 必须使用至少 32 个字符的强随机字符串
#    - DATABASE_URL 必须使用真实的数据库地址，不要使用 localhost
#    - ALERT_ENABLED 建议设置为 true，以便及时发现问题
#
# 2. 环境变量优先级：
#    - 系统环境变量 > .env 文件 > 默认值
#
# 3. 验证环境变量：
#    - 应用启动时会自动验证所有必需的环境变量
#    - 如果验证失败，应用将无法启动
#
# 4. 生成安全的 JWT_SECRET：
#    - 可以使用命令: openssl rand -base64 32
#    - 或使用在线工具生成随机字符串
#
